<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>PinkBlue Quizmas 2025</title>
  <link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@400;500;600;700&family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="css/style.css">
</head>
<body>
  <!-- Backgrounds -->
  <div class="gradient-bg"></div>
  <div class="mesh-gradient"></div>

  <!-- LOADING OVERLAY (shows first) -->
  <div id="loadingOverlay" class="screen-loading">
    <div class="loader-dots">
      <span></span><span></span><span></span>
    </div>
    <span>Initializing quiz‚Ä¶</span>
  </div>

  <div class="app-wrapper">
    <!-- Top nav -->
    <header class="top-nav">
      <div class="nav-content">
        <div class="logo-mark">PB Quiz</div>
        <div class="nav-stats">
          <div class="attempts-badge">
            <div class="attempts-label">Attempts left</div>
            <div class="attempts-value" id="attemptsLeft">2</div>
          </div>
        </div>
      </div>
    </header>

    <!-- START SCREEN -->
    <main id="startScreen" class="screen active">
      <div class="screen-content">
        <section class="hero-section-compact">
          <h1 class="hero-title-compact">
            PinkBlue <span class="gradient-text">Quizmas</span>
          </h1>
          <p class="hero-subtitle-compact">
            Answer 10 questions in 2 minutes and unlock exclusive rewards.
          </p>
        </section>

        <!-- Rewards preview -->
        <section class="rewards-preview-compact">
          <h2 class="section-title-compact">Rewards you can win</h2>
          <div id="rewardsCarousel" class="rewards-carousel-compact"></div>
        </section>

        <!-- Buttons -->
        <div class="button-stack">
          <button id="startBtn" class="btn btn-primary btn-large btn-glow">
            <span class="btn-text">Start Quiz</span>
          </button>
          <button id="leaderboardBtn" class="btn btn-secondary btn-small">
            <span class="btn-text">View Leaderboard</span>
          </button>
          <button id="historyBtn" class="btn btn-secondary btn-small" style="display:none;">
            <span class="btn-text">View My Attempts</span>
          </button>
        </div>
      </div>
    </main>

    <!-- QUIZ SCREEN -->
    <main id="quizScreen" class="screen">
      <div class="screen-content">
        <div id="noRewardsMessage" class="no-rewards-message" style="display:none;">
          <div class="no-rewards-icon">üìö</div>
          <div class="no-rewards-title">Practice mode</div>
          <div class="no-rewards-text">
            No more reward attempts left, but keep playing to improve!
          </div>
        </div>

        <!-- Progress -->
        <div class="progress-pills">
          <div id="progressText" class="progress-text">Question 1 of 10</div>
          <div id="progressPills" class="pill-container"></div>
        </div>

        <!-- Question header: number + inline timer -->
        <div class="question-header-row">
          <div class="question-number">
            <span id="qNumber">01</span>
            <span class="q-separator">/</span>
            <span class="q-total">10</span>
          </div>
          <div id="inlineTimer">Time: 2:00</div>
        </div>

        <!-- Question -->
        <div class="question-card">
          <div id="questionText" class="question-text">Loading question‚Ä¶</div>
        </div>

        <!-- Options -->
        <div id="optionsList" class="options-list"></div>

        <!-- Next button -->
        <button id="nextBtn" class="btn btn-primary btn-large btn-disabled" disabled>
          <span class="btn-text">Next Question</span>
        </button>
      </div>
    </main>

    <!-- RESULTS SCREEN -->
    <main id="resultsScreen" class="screen">
      <div class="screen-content">
        <h2 id="resultsTitle" class="results-title">Quiz complete!</h2>
        <p id="resultsSubtitle" class="results-subtitle">Your performance summary.</p>

        <div class="score-circle-wrapper">
          <div class="score-content">
            <div id="scoreValue" class="score-value">0</div>
            <div class="score-label">/ 10</div>
          </div>
        </div>

        <!-- No rewards message -->
        <div id="noRewardsMessageResults" class="no-rewards-message" style="display:none;">
          <div class="no-rewards-icon">üìö</div>
          <div class="no-rewards-title">Practice mode</div>
          <div class="no-rewards-text">You've used all reward attempts.</div>
        </div>

        <!-- Reward card -->
        <section id="rewardCard" class="reward-card" style="display:none;">
          <div class="reward-badge">üéÅ</div>
          <h3 id="rewardTitle" class="reward-title">Your reward</h3>
          <p id="rewardDesc" class="reward-desc"></p>
          <div class="coupon-box">
            <div class="coupon-label">Coupon code</div>
            <div id="couponCode" class="coupon-code">XXXXX</div>
            <button id="copyBtn" class="btn-copy">
              <span>Copy code</span>
            </button>
          </div>
        </section>

        <div class="button-stack">
          <a href="https://pinkblue.in/cart" class="btn btn-primary btn-large" target="_blank">
            <span class="btn-text">Redeem on PinkBlue</span>
          </a>
          <button id="shareBtn" class="btn btn-whatsapp btn-small">
            <span class="btn-text">Share on WhatsApp</span>
          </button>
          <button id="tryAgainBtn" class="btn btn-secondary btn-small">
            <span class="btn-text">Play again</span>
          </button>
        </div>
      </div>
    </main>

    <!-- LEADERBOARD -->
    <main id="leaderboardScreen" class="screen">
      <div class="screen-content">
        <div class="screen-header">
          <button id="backBtn" class="back-btn">‚Üê</button>
          <h2 class="screen-title">Leaderboard</h2>
          <div class="header-spacer"></div>
        </div>
        <div id="leaderboardContainer" class="leaderboard-container"></div>
      </div>
    </main>

    <!-- HISTORY -->
    <main id="historyScreen" class="screen">
      <div class="screen-content">
        <div class="screen-header">
          <button id="backFromHistory" class="back-btn">‚Üê</button>
          <h2 class="screen-title">My Attempts</h2>
          <div class="header-spacer"></div>
        </div>
        <div id="historyContainer" class="history-container"></div>
      </div>
    </main>

    <!-- RULES MODAL -->
    <div id="rulesModal" class="modal">
      <div class="modal-content">
        <h3>Quiz Rules</h3>
        <ul>
          <li>10 advanced dental questions</li>
          <li>2 minutes total time</li>
          <li>Higher score = better reward</li>
          <li>Maximum 2 reward attempts</li>
        </ul>
        <button id="rulesOkayBtn" class="btn btn-primary btn-small">
          Got it, start
        </button>
      </div>
    </div>

    <!-- EMAIL MODAL -->
    <div id="emailModal" class="modal">
      <div class="modal-content">
        <h3>Enter your email</h3>
        <p style="font-size:0.9rem;color:var(--text-secondary);margin-bottom:16px;">
          To track your rewards and attempts.
        </p>
        <input type="email" id="emailInput" placeholder="you@example.com" />
        <button id="emailSubmitBtn" class="btn btn-primary btn-small">
          Continue
        </button>
      </div>
    </div>

    <!-- COUNTDOWN OVERLAY -->
    <div id="countdownOverlay" class="countdown-overlay">
      <div id="countdownNumber">3</div>
    </div>

    <!-- TOAST -->
    <div id="toast" class="toast">
      <div id="toastIcon" class="toast-icon">‚úì</div>
      <div id="toastMessage" class="toast-message"></div>
    </div>
  </div>

  <!-- Scripts -->
  <script src="https://cdn.jsdelivr.net/npm/gsap@3.12.2/dist/gsap.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.9.3/dist/confetti.browser.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
  <script src="js/config.js"></script>
  <script src="js/supabase.js"></script>
  <script src="js/quiz.js"></script>
</body>
</html>
